{% extends "portfolio/base.html" %}

{% block content %}

<button class="add-button" onclick="show_window()" id="test1">Choose and Buy Currency</button>

<div id="window-app" class = "modal">
    <div class = "modal-content">
        <input type="text" id="myInput" onkeyup="search()" placeholder="Search for Crypto..." style = "margin-bottom: 20px;"></input>
        <div class="panel-body table-responsive">
            {% if api_data %}            
                {% for coin in api_data %}
                    <button class = "collapsible" id="{{coin.id}}" style = "width: 100%; margin-bottom: 10px;">
                        <div class = "content">     
                            <img src="{{coin.image}}" height="70px" alt="Coin Logo">
                            <div class = "p">{{coin.name}}</div>
                            <div style="display: none;" class = "price">{{coin.current_price}} USD</div> 
                        </div> 
                    </button>                  
                {% endfor %}            
            {% else %}            
                <p>Nothing Here to show</p>            
            {% endif %}
        </div>
    </div>
</div>

<div id="window-app-buy" class = "modal">
    <div class = "modal-content">
        <form action="/profile/" method="post">
            {{ form }}
            <input type="submit" value="Submit">
        </form>
    </div>
</div>




<button class="add-button" onclick="show()">Show portfolio</button>
<div id="user_port" style = "display: none">
    <table class="table table-striped">
        <thead>
        <tr>                              
            <th scope="col">Name</th>                
            <th scope="col">Amount</th>                
            <th scope="col">Price</th>                                                
        </tr>
        </thead>
    </table>
    <div class="panel-body table-responsive" style="padding: 0px;">
    <table class="table table-striped">
        <tbody>               
            {% if assets %}           
                {% for asset in assets %}
                    <tr>
                        <td class="align-middle">{{asset.name}}</td>           
                        <td class="align-middle">{{asset.amount}}</td>
                        <td class="align-middle">{{asset.price}}</td>
                    </tr>           
                {% endfor %}            
            {% else %}            
                <p>Your portfolio is empty</p>       
            {% endif %}       
        </tbody>
    </table>
    </div>
</div>   

    <h1>List of all available coins</h1>
    <table class="table table-striped">
        <thead>
        <tr>                
            <th scope="col">Logo</th>                
            <th scope="col">Name</th>                
            <th scope="col">Rank</th>                
            <th scope="col">Market cap</th>
            <th scope="col">Price</th>                                                
        </tr>
        </thead>
    </table>
    <div class="panel-body table-responsive" style="padding: 0px;">
    <table class="table table-striped">
        <thead style="display: none;">
            <tr>                
                <th scope="col">Logo</th>                
                <th scope="col">Name</th>                
                <th scope="col">Rank</th>                
                <th scope="col">Market cap</th>
                <th scope="col">Price</th>                                                
            </tr>
            </thead>
        <tbody>               
            {% if api_data %}            
                {% for coin in api_data %}
                    <tr>                
                            <td><img src="{{coin.image}}" height="70px" alt="Coin Logo"></td>                
                            <td class="align-middle">{{coin.name}}</td>           
                            <td class="align-middle">{{coin.market_cap_rank}}</td>
                            <td class="align-middle">{{coin.market_cap}}</td>                
                            <td class="align-middle">{{coin.current_price}} USD</td>             
                    </tr>            
                {% endfor %}            
            {% else %}            
                <p>Nothing Here to show</p>            
            {% endif %}        
        </tbody>
    </table>
    </div>
{% endblock content %}