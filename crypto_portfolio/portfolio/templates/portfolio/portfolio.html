{% extends "portfolio/base.html" %}

{% block content %}



<button class="add-button" onclick="show_window()" id="test1">Choose and Buy Currency</button>

<div id="window-app" class = "modal">
    <div class = "modal-content">
        <input type="text" id="myInput" onkeyup="search()" placeholder="Search for Crypto..." style = "margin-bottom: 20px;"></input>
        <div class="panel-body table-responsive">
            {% if api_data %}            
                {% for coin in api_data %}
                    <button class = "collapsible" style = "width: 100%; margin-bottom: 10px;">
                        <div class = "content">        
                            <img src="{{coin.image}}" height="70px" alt="Coin Logo">
                            <div class = "p">{{coin.name}}</div>
                            <div style="display: none;" class = "rank">{{coin.market_cap_rank}}</div>
                            <div style="display: none;" class = "market_cap">{{coin.market_cap}}</div>
                            <div style="display: none;" class = "price">{{coin.current_price}} USD</div> 
                        </div> 
                    </button>                  
                {% endfor %}            
            {% else %}            
                <p>Nothing Here to show</p>            
            {% endif %}
        </div>
    </div>
</div>

<div id="window-app-buy" class = "modal">
    <div class = "modal-content">
        <h2>Do you want to buy: <div id = "name" style="display: inline-block;"></div>?</h2>
        <a>Plesae, put the amount of Currency you are willing to buy.</a>
        <input type="number" onkeyup="calculate()" onmouseup="calculate()" id="inputAmount" placeholder="Ok, Throw me some numbers..." style = "margin-bottom: 20px;"></input>
        <a>Total cost: <div id = "amount" style="display: inline-block;"></div></a>
    </div>
</div>





{% if assets %}            
    {% for asset in assets %}
        <p>{{asset.name}} {{asset.amount}} {{asset.price}}</p>           
    {% endfor %}            
    {% else %}            
        <p>Your portfolio is empty</p>    
        <button class="add-button" onclick="">Add new asset</button>   
{% endif %} 

    <h1>List of all available coins</h1>
    <table class="table table-striped">
        <thead>
        <tr>                
            <th scope="col">Logo</th>                
            <th scope="col">Name</th>                
            <th scope="col">Rank</th>                
            <th scope="col">Market cap</th>
            <th scope="col">Price</th>                                                
        </tr>
        </thead>
    </table>
    <div class="panel-body table-responsive" style="padding: 0px;">
    <table class="table table-striped">
        <thead style="display: none;">
            <tr>                
                <th scope="col">Logo</th>                
                <th scope="col">Name</th>                
                <th scope="col">Rank</th>                
                <th scope="col">Market cap</th>
                <th scope="col">Price</th>                                                
            </tr>
            </thead>
        <tbody>               
            {% if api_data %}            
                {% for coin in api_data %}
                    <tr>                
                            <td><img src="{{coin.image}}" height="70px" alt="Coin Logo"></td>                
                            <td class="align-middle">{{coin.name}}</td>           
                            <td class="align-middle">{{coin.market_cap_rank}}</td>
                            <td class="align-middle">{{coin.market_cap}}</td>                
                            <td class="align-middle">{{coin.current_price}} USD</td>             
                    </tr>            
                {% endfor %}            
            {% else %}            
                <p>Nothing Here to show</p>            
            {% endif %}        
        </tbody>
    </table>
    </div>
{% endblock content %}